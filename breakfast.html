<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Breakfast Menu</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
    background: #fdf6e3;
  }
  h1 {
    text-align: center;
    color: #d35400;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
  }
  th, td {
    padding: 10px;
    border: 1px solid #ccc;
    text-align: center;
  }
  button {
    margin-top: 15px;
    padding: 10px 15px;
    border: none;
    background: #27ae60;
    color: white;
    cursor: pointer;
    border-radius: 5px;
  }
  button:hover {
    background: #219150;
  }
  #qrCode {
    display: none;
    margin-top: 15px;
  }
  #orderPlaced {
    display: none;
    margin-top: 15px;
    color: green;
    font-weight: bold;
  }
</style>
</head>
<body>

<h1>Breakfast Menu</h1>

<table>
  <tr>
    <th>Item</th>
    <th>Price</th>
    <th>Select</th>
    <th>Quantity</th>
  </tr>
  <tr>
    <td>Idli</td>
    <td>₹10</td>
    <td><input type="checkbox" class="item" data-name="Idli" value="10"></td>
    <td><select class="qty">
      <option value="0">0</option>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
    </select></td>
  </tr>
  <tr>
    <td>Dosa</td>
    <td>₹30</td>
    <td><input type="checkbox" class="item" data-name="Dosa" value="30"></td>
    <td><select class="qty">
      <option value="0">0</option>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
    </select></td>
  </tr>
  <tr>
    <td>Pongal</td>
    <td>₹40</td>
    <td><input type="checkbox" class="item" data-name="Pongal" value="40"></td>
    <td><select class="qty">
      <option value="0">0</option>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
    </select></td>
  </tr>
</table>

<button onclick="placeOrder('Cash')">Pay with Cash</button>
<button onclick="placeOrder('GPay')">Pay with GPay</button>

<div id="qrCode">
  <p>Scan QR Code to pay:</p>
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/89/UPI-QR-code-example.svg/300px-UPI-QR-code-example.svg.png" alt="QR Code" width="200">
</div>

<div id="orderPlaced">✅ Order Placed Successfully!</div>

<script>
function placeOrder(paymentMode) {
  const checkboxes = document.querySelectorAll('.item');
  const selects = document.querySelectorAll('.qty');

  let orderItems = [];
  let totalQty = 0;
  let totalPrice = 0;

  checkboxes.forEach((cb, i) => {
    let qty = parseInt(selects[i].value);
    if (cb.checked && qty > 0) {
      orderItems.push(`${cb.dataset.name} (x${qty})`);
      totalQty += qty;
      totalPrice += qty * parseInt(cb.value);
    }
  });

  if (orderItems.length === 0) {
    alert("Please select at least one item.");
    return;
  }

  const data = {
    item: orderItems.join(", "),
    quantity: totalQty,
    price: totalPrice,
    payment: paymentMode,
    datetime: new Date().toLocaleString()
  };

  fetch("https://script.google.com/macros/s/AKfycby07LAmpcWKUJmwybbFMxng3wmVsTLJhmVwBl3AVJoq-SllwvlC6NJmP4l_rWETmJN9GQ/execl", {
    method: "POST",
    mode: "no-cors",
    headers: { "Content-Type": "application/x-www-form-urlencoded" },
    body: new URLSearchParams(data)
  });

  if (paymentMode === "GPay") {
    document.getElementById("qrCode").style.display = "block";
  } else {
    document.getElementById("qrCode").style.display = "none";
  }

  document.getElementById("orderPlaced").style.display = "block";
}
</script>

</body>
</html>
